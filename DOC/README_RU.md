Infrared Heating Controller  aka.  инфракрасная станция
--------

Данный проект был сделан за 3-е суток и предназначен для решения конкретной задачи. Программная часть реализована в полном размере, багов не было замечено. для аппаратной части рекомендую изготовить печатную плату, это решит некоторые вопросы с безопасностью, надежностью, трудностьями сборки. 

Программа для atmega328 с arduino Framework в среде VS Code + platformio, предназначена для контроля температуры нагревательного элемента в соответствие с настроенным режимом нагрева. Предназначена для ремонта и монтажа печатных плат.

## Что такое термопрофиль

Оптимальный профиль температуры печи оплавления является одним из наиболее важных факторов для обеспечения качества паяных соединений сборок печатных плат с компонентами, установленными на их поверхности. Термопрофиль— это набор температур, воздействующих на сборку в течение некоторого времени. Если использовать две координаты (время и температуру), то можно получить некоторую кривую, которая представляет изменение температуры в какой-либо точке на печатной плате, в любой момент времени при протекании процесса оплавления.


![пример термопрофиля](https://github.com/MuratovAS/ihc/blob/master/DOC/thermal_profile.jpg)



Функции
-------- 
- Нагрев в соответствие с термпрофилем
- нагрев в ручном режиме с плавным выходом на указанную температуру
- детальная настройка каждого из режимов
- детальная настройка аппаратных параметров, характерных для используемых компонентов
- PID регулятор
- датчиком температуры под управлением max6675
- экран 128х64 с контроллером, поддерживаемым U8g2lib
- интерфейс управления энкодер

Описание 
--------

### Главный экран
![пример главного экрана](https://github.com/MuratovAS/ihc/blob/master/DOC/hot.jpg)

	Mn - профиль пайки 
	MAN (manual) – ручной режим, плавный выход на рабочую температуру с возможностью коррекции вовремя работы
	  
	T – температура на датчике
	S – установленная температура
	P – фаза профиля
	M – результирующая температура
	t – время с момента запуска 

  - Долгое нажатие запускает/останавливает процесс нагрева

  - Удержание + поворот вправо переводит в режим настройки системных параметров

  - Удержание + поворот влево переводит в режим настройки текущего режима нагрева

    
### Меню настроек

![пример настроек термопрофиля](https://github.com/MuratovAS/ihc/blob/master/DOC/conf.jpg)
	

	//profile
	Tn – температура фазы n
	tn – время в фазе n

![пример системных настроек](https://github.com/MuratovAS/ihc/blob/master/DOC/set.jpg)
	

	//setting
	Pu - ширина импульса
	P - пропорциональная составляющая 
	D - дифференциальная составляющая 
	I - интегральная составляющая
	Co - коррекция температуры 
	Am - нормальная температура окружающей среды 
	Er – процент ошибки измерений (если он будет превышен произойдет экстренное отключение) 

  - Вправо/влево переход между пунктами или изменение параметра
  - Короткое нажатие переходит в режим изменения параметров или выходит из него
  - Долгое нажатие возвращает на начальный экран

## Немного о железе

![пример настроек термопрофиля](https://github.com/MuratovAS/ihc/blob/master/DOC/hard.jpg)

Как уже было сказана данная установка построена на скорую руку, многие решения **не стоит** повторять. Устройство основано на atmega328, в качестве экрана использован дисплей 1.3 дюйма на контроллере SH1106, но его можно заменить на любой другой с разрешение 128х64 (без значительной доработки кода). Для более точного измерения температуры используется термопара с контроллером MAX6675 с выносным датчиком. это позволяет контролировать температуру непосредственно на плате. В Силовой части стоит коморка от кухонной ИК плиты в связки с китайским твердотельным рэле на 40а. Корпус же сделан из установки для подогрева хим. колб, накрытой листом дюрали 4мм, на стойках в 5мм.такая конструкция позволяет достигать температуры в 200градусов за время меньшее 2х минут. что уже укладывается в рекомендованные термопрофили для пайки. 

Всю установку можно собрать на китайских модулях навесным монтажом.

Настройка под ваш экран выполняется в строке: 

~~~ c
U8G2_SH1106_128X64_NONAME_1_HW_I2C u8g2(U8G2_R2, /* reset=*/ U8X8_PIN_NONE, /* clock=*/ 16, /* data=*/ 17);
~~~

Конфиге под ваш дисплей и ориентацию экрана можно найти в официальном репозитории U8g2lib на гитхабе.

Сразу же после этой строки идет код конфигурации выводов МК, можете использовать те же контакты, или заменить их на свои (тогда будет сложнее обновлять прошивку из репозитория).

Так же стоит отметить что энкодеры бывают разные, формирующие один импульс или два на один щелчек. в моем случае используется энкодер с двойным тиком, но я все же советую использовать энкодоре с одним тиком.

Возможна проблема с точностью термопары, это решается использование более качественной оной.   

Не скупитесь на размеры корпуса и теплоизоляцию
нагревателя, иначе это может привести к перегреву внутренностей установки, в мою случае температура достигает 60%, в будущем корпус будит переделан.